# æ„æ¶µè‡ªä¹ å®¤ - å¾®ä¿¡å°ç¨‹åº

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„è‡ªä¹ å®¤é¢„è®¢å¾®ä¿¡å°ç¨‹åºï¼Œä½¿ç”¨Taroæ¡†æ¶å¼€å‘ï¼ŒåŒ…å«å‰ç«¯å°ç¨‹åºå’Œåç«¯APIæœåŠ¡ã€‚

## é¡¹ç›®æ¦‚è§ˆ

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ  **åº—é“ºæµè§ˆ**: æŸ¥çœ‹é™„è¿‘è‡ªä¹ å®¤ï¼Œæ”¯æŒæœç´¢ã€ç­›é€‰ã€æ’åº
- ğŸ“ **ä½ç½®æœåŠ¡**: åŸºäºåœ°ç†ä½ç½®æ¨èé™„è¿‘é—¨åº—
- ğŸ’º **åº§ä½é¢„è®¢**: å®æ—¶æŸ¥çœ‹åº§ä½çŠ¶æ€ï¼Œåœ¨çº¿é¢„è®¢
- ğŸ’° **åœ¨çº¿æ”¯ä»˜**: å¾®ä¿¡æ”¯ä»˜é›†æˆï¼Œæ”¯æŒå¤šç§ä»˜è´¹æ–¹å¼
- ğŸ“‹ **è®¢å•ç®¡ç†**: æŸ¥çœ‹è®¢å•å†å²ï¼Œç®¡ç†é¢„è®¢çŠ¶æ€
- ğŸ‘¤ **ç”¨æˆ·ä¸­å¿ƒ**: ä¸ªäººä¿¡æ¯ã€ä¼šå‘˜ç³»ç»Ÿã€ç§¯åˆ†ç®¡ç†
- â­ **è¯„ä»·ç³»ç»Ÿ**: åº—é“ºè¯„åˆ†ã€ç”¨æˆ·åé¦ˆ
- ğŸ” **å¾®ä¿¡ç™»å½•**: ä¸€é”®ç™»å½•ï¼Œå¿«é€Ÿæ³¨å†Œ

### æŠ€æœ¯æ¶æ„

#### å‰ç«¯ï¼ˆå¾®ä¿¡å°ç¨‹åºï¼‰
- **æ¡†æ¶**: Taro 3.x + React + TypeScript
- **UIç»„ä»¶**: Taro UI
- **çŠ¶æ€ç®¡ç†**: MobX
- **ç½‘ç»œè¯·æ±‚**: å°è£…çš„Requestç±»
- **æ ·å¼**: SCSS + CSSå˜é‡
- **è·¨ç«¯æ”¯æŒ**: å¾®ä¿¡å°ç¨‹åºã€æ”¯ä»˜å®å°ç¨‹åºã€H5

#### åç«¯ï¼ˆNode.jsï¼‰
- **æ¡†æ¶**: Express + TypeScript
- **æ•°æ®åº“**: MySQL + Redis
- **è®¤è¯**: JWT + å¾®ä¿¡ç™»å½•
- **æ”¯ä»˜**: å¾®ä¿¡æ”¯ä»˜API
- **æ—¥å¿—**: Winston
- **éƒ¨ç½²**: Docker + PM2

## é¡¹ç›®ç»“æ„

```
yihan-study-room/
â”œâ”€â”€ Taroå‰ç«¯/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app.tsx           # åº”ç”¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ app.config.ts     # å…¨å±€é…ç½®
â”‚   â”‚   â”œâ”€â”€ app.scss          # å…¨å±€æ ·å¼
â”‚   â”‚   â”œâ”€â”€ pages/            # é¡µé¢ç›®å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ index/       # é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ store/       # åº—é“ºç›¸å…³
â”‚   â”‚   â”‚   â”œâ”€â”€ order/       # è®¢å•ç›¸å…³
â”‚   â”‚   â”‚   â”œâ”€â”€ user/        # ç”¨æˆ·ç›¸å…³
â”‚   â”‚   â”‚   â””â”€â”€ common/      # é€šç”¨é¡µé¢
â”‚   â”‚   â”œâ”€â”€ components/      # è‡ªå®šä¹‰ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/        # APIæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ store/           # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ assets/          # é™æ€èµ„æº
â”‚   â”œâ”€â”€ config/              # Taroé…ç½®
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ backend/                 # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app.ts          # åº”ç”¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ config/         # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ controllers/    # æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ models/         # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ middleware/     # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ routes/         # è·¯ç”±
â”‚   â”‚   â””â”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ Dockerfile
â”‚
â”œâ”€â”€ package.json             # å‰ç«¯ä¾èµ–
â”œâ”€â”€ project.config.json      # å°ç¨‹åºé…ç½®
â””â”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 16.0.0
- MySQL >= 8.0
- Redis >= 6.0
- å¾®ä¿¡å¼€å‘è€…å·¥å…·

### å‰ç«¯éƒ¨ç½²

1. **å®‰è£…ä¾èµ–**
```bash
npm install
```

2. **é…ç½®å°ç¨‹åº**
- åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°æ³¨å†Œå°ç¨‹åº
- ä¿®æ”¹ `project.config.json` ä¸­çš„ `appid`
- é…ç½®æœåŠ¡å™¨åŸŸå

3. **å¼€å‘è°ƒè¯•**
```bash
# å¾®ä¿¡å°ç¨‹åº
npm run dev:weapp

# H5
npm run dev:h5

# æ”¯ä»˜å®å°ç¨‹åº
npm run dev:alipay
```

4. **æ„å»ºå‘å¸ƒ**
```bash
# æ„å»ºå¾®ä¿¡å°ç¨‹åº
npm run build:weapp

# æ„å»ºH5
npm run build:h5
```

### åç«¯éƒ¨ç½²

1. **å®‰è£…ä¾èµ–**
```bash
cd backend
npm install
```

2. **ç¯å¢ƒé…ç½®**
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶é…ç½®æ•°æ®åº“ã€Redisã€å¾®ä¿¡ç­‰ä¿¡æ¯
```

3. **æ•°æ®åº“åˆå§‹åŒ–**
```bash
# åˆ›å»ºæ•°æ®åº“
mysql -u root -p -e "CREATE DATABASE zishi CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"
```

4. **å¯åŠ¨æœåŠ¡**
```bash
# å¼€å‘ç¯å¢ƒ
npm run dev

# ç”Ÿäº§ç¯å¢ƒ
npm run build
npm start
```

### Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t zishi-backend ./backend

# è¿è¡Œå®¹å™¨
docker run -d \
  --name zishi-backend \
  -p 3000:3000 \
  -e DB_HOST=your-db-host \
  -e DB_PASSWORD=your-db-password \
  zishi-backend
```

## API æ–‡æ¡£

### è®¤è¯æ¥å£
- `POST /api/v1/auth/wx-login` - å¾®ä¿¡ç™»å½•
- `POST /api/v1/auth/refresh-token` - åˆ·æ–°token
- `GET /api/v1/auth/user-info` - è·å–ç”¨æˆ·ä¿¡æ¯

### åº—é“ºæ¥å£
- `GET /api/v1/stores` - è·å–åº—é“ºåˆ—è¡¨
- `GET /api/v1/stores/:id` - è·å–åº—é“ºè¯¦æƒ…
- `GET /api/v1/stores/:id/seats` - è·å–åº§ä½åˆ—è¡¨
- `POST /api/v1/stores/:id/favorite` - æ”¶è—åº—é“º

### è®¢å•æ¥å£
- `POST /api/v1/orders` - åˆ›å»ºè®¢å•
- `GET /api/v1/orders` - è·å–è®¢å•åˆ—è¡¨
- `GET /api/v1/orders/:id` - è·å–è®¢å•è¯¦æƒ…
- `PUT /api/v1/orders/:id` - æ›´æ–°è®¢å•çŠ¶æ€

### æ”¯ä»˜æ¥å£
- `POST /api/v1/payment/create` - åˆ›å»ºæ”¯ä»˜è®¢å•
- `POST /api/v1/payment/notify` - æ”¯ä»˜å›è°ƒ
- `GET /api/v1/payment/query/:orderNo` - æŸ¥è¯¢æ”¯ä»˜çŠ¶æ€

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ ç”¨æˆ·ä½“éªŒ
- **ç›´è§‚ç•Œé¢**: ç®€æ´ç°ä»£çš„UIè®¾è®¡
- **æµç•…æ“ä½œ**: ä¼˜åŒ–çš„äº¤äº’ä½“éªŒ
- **å¿«é€Ÿå“åº”**: é«˜æ•ˆçš„æ•°æ®åŠ è½½
- **ç¦»çº¿æ”¯æŒ**: åŸºç¡€åŠŸèƒ½ç¦»çº¿å¯ç”¨

### ğŸ”’ å®‰å…¨ä¿éšœ
- **æ•°æ®åŠ å¯†**: æ•æ„Ÿä¿¡æ¯åŠ å¯†å­˜å‚¨
- **æ¥å£å®‰å…¨**: JWTè®¤è¯ + ç­¾åéªŒè¯
- **æ”¯ä»˜å®‰å…¨**: å¾®ä¿¡æ”¯ä»˜å®˜æ–¹SDK
- **éšç§ä¿æŠ¤**: ä¸¥æ ¼çš„ç”¨æˆ·æ•°æ®ä¿æŠ¤

### ğŸ“Š ä¸šåŠ¡åŠŸèƒ½
- **å®æ—¶åº“å­˜**: åº§ä½çŠ¶æ€å®æ—¶æ›´æ–°
- **æ™ºèƒ½æ¨è**: åŸºäºä½ç½®å’Œåå¥½æ¨è
- **ä¼šå‘˜ç³»ç»Ÿ**: ç§¯åˆ†ã€ç­‰çº§ã€ä¼˜æƒ åˆ¸
- **æ•°æ®ç»Ÿè®¡**: å®Œæ•´çš„ä¸šåŠ¡æ•°æ®åˆ†æ

### ğŸš€ æ€§èƒ½ä¼˜åŒ–
- **ç¼“å­˜ç­–ç•¥**: Redisç¼“å­˜çƒ­ç‚¹æ•°æ®
- **æ•°æ®åº“ä¼˜åŒ–**: ç´¢å¼•ä¼˜åŒ– + æŸ¥è¯¢ä¼˜åŒ–
- **å›¾ç‰‡ä¼˜åŒ–**: CDN + WebPæ ¼å¼
- **ä»£ç åˆ†å‰²**: æŒ‰éœ€åŠ è½½å‡å°‘åŒ…ä½“ç§¯

## å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹æ£€æŸ¥
- éµå¾ª ESLint ä»£ç è§„èŒƒ
- ç»Ÿä¸€çš„ä»£ç æ ¼å¼åŒ–ï¼ˆPrettierï¼‰
- Git Commit è§„èŒƒ

### é¡¹ç›®è§„èŒƒ
- ç»„ä»¶åŒ–å¼€å‘
- æ¨¡å—åŒ–è®¾è®¡
- RESTful APIè®¾è®¡
- å®Œå–„çš„é”™è¯¯å¤„ç†

## éƒ¨ç½²è¯´æ˜

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
1. **æœåŠ¡å™¨é…ç½®**
   - CPU: 2æ ¸å¿ƒä»¥ä¸Š
   - å†…å­˜: 4GBä»¥ä¸Š
   - å­˜å‚¨: 50GBä»¥ä¸Š

2. **ç¯å¢ƒå®‰è£…**
   - Node.js 16+
   - MySQL 8.0+
   - Redis 6.0+
   - Nginxï¼ˆåå‘ä»£ç†ï¼‰

3. **åŸŸåé…ç½®**
   - é…ç½®HTTPSè¯ä¹¦
   - è®¾ç½®å¾®ä¿¡å°ç¨‹åºæœåŠ¡å™¨åŸŸå
   - é…ç½®CDNåŠ é€Ÿ

### ç›‘æ§è¿ç»´
- **æ—¥å¿—ç›‘æ§**: Winston + ELK Stack
- **æ€§èƒ½ç›‘æ§**: PM2 + è‡ªå®šä¹‰ç›‘æ§
- **é”™è¯¯è¿½è¸ª**: Sentryé›†æˆ
- **è‡ªåŠ¨éƒ¨ç½²**: CI/CD Pipeline

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€: [https://github.com/your-username/zishi](https://github.com/your-username/zishi)
- é—®é¢˜åé¦ˆ: [Issues](https://github.com/your-username/zishi/issues)
- é‚®ç®±: your-email@example.com

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-01-01)
- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ğŸ‰ å®Œæ•´çš„è‡ªä¹ å®¤é¢„è®¢åŠŸèƒ½
- ğŸ’° å¾®ä¿¡æ”¯ä»˜é›†æˆ
- ğŸ‘¤ ç”¨æˆ·ä¸­å¿ƒå’Œä¼šå‘˜ç³»ç»Ÿ
- ğŸ“± å“åº”å¼è®¾è®¡é€‚é…

---

**æ„æ¶µè‡ªä¹ å®¤** - è®©å­¦ä¹ æ›´ç®€å•ï¼Œè®©ä¸“æ³¨æ›´çº¯ç²¹